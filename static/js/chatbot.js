/*
DOCUMENTATION GENERATED BY AI
```
*
 * This code is responsible for handling the submission of user messages
 * and displaying the corresponding bot responses on the webpage.
 * 
 * Main functionality:
 * 1. Capture the submitted message from the user through the form.
 * 2. Send the captured message to the server using a POST request via AJAX.
 * 3. Append the bot's response, received from the server, to the conversation div.
 * 4. Clear the message input field for the user to enter a new message.
 * 
 * Related files and dependencies:
 * - This code is typically included within a script tag in an HTML file or a separate JavaScript file.
 * - Requires jQuery to be imported for proper functioning.
 * - The {% url 'submit_message' %} syntax assumes that Django is being used for server-side rendering.
 * - '{{ csrf_token }}' is a Django-specific method for handling CSRF protection.
 * 
 * Key implementation details:
 * - The code is wrapped in a $(document).ready() function to ensure that the DOM is fully loaded before execution.
 * - The form used for submitting messages should have the ID "message-form".
 * - The input field for the user's message should have the ID "message-input".
 * - The div where the conversation takes place should have the ID "conversation".
 * - The POST request is sent to the 'submit_message' URL.
 * - The server is expected to return a JSON object with a `bot_response` key containing the bot's reply.
 * 
 * Additional information:
 * - To modify the appearance of the bot responses, you can edit the 'bot-response' CSS class.
 * - For any changes to the server-side handling of messages, update the handling function associated with the 'submit_message' URL.
 
```

Copyright 2023, Joe Crowley, All rights reserved.
*/
$(document).ready(function(){
    $("#message-form").submit(function(event){
        event.preventDefault();
        var message = $("#message-input").val();
        $.ajax({
            type: "POST",
            url: "{% url 'submit_message' %}",
            data: {
                message: message,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function(data) {
                var bot_response = data.bot_response;
                $("#conversation").append("<div class='bot-response'>" + bot_response + "</div>");
                $("#message-input").val("");
            }
        });
    });
});

